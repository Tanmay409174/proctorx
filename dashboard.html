<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <style>
   
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(-45deg, #2E7D32, #43A047, #66BB6A, #A5D6A7);
      background-size: 500% 500%;
      animation: bgMove 10s ease-in-out infinite;
      margin: 0;
      color: #333;
    }
    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      25% { background-position: 50% 100%; }
      50% { background-position: 100% 50%; }
      75% { background-position: 50% 0%; }
      100% { background-position: 0% 50%; }
    }

    header {
      background: rgba(255, 255, 255, 0.15);
      color: white;
      padding: 18px;
      font-size: 28px;
      text-align: center;
      backdrop-filter: blur(12px);
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

   
    .container {
      max-width: 950px;
      margin: 40px auto;
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(16px) saturate(180%);
      -webkit-backdrop-filter: blur(16px) saturate(180%);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 30px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
      transition: all 0.4s ease;
      animation: fadeSlideIn 0.8s ease both;
    }
    .container:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 36px rgba(0, 0, 0, 0.3);
    }

    
    .tabs {
      display: flex;
      justify-content: center;
      border-bottom: 2px solid #ccc;
      margin-bottom: 20px;
    }
    .tab {
      flex: 1;
      text-align: center;
      padding: 12px;
      cursor: pointer;
      background: #f0f0f0;
      border-radius: 8px 8px 0 0;
      transition: 0.3s;
      font-weight: bold;
      color: #2e7d32;
    }
    .tab:hover { background: #e8f5e9; }
    .tab.active {
      background: #4caf50;
      color: white;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.15);
    }

    .tab-content { display: none; }
    .tab-content.active { display: block; }

    input, textarea, select {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
      transition: 0.3s;
    }
    input:focus, textarea:focus, select:focus {
      border-color: #4caf50;
      outline: none;
      box-shadow: 0 0 6px rgba(76,175,80,0.5);
    }

    button {
      background: linear-gradient(135deg, #43A047, #66BB6A);
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 15px;
      font-weight: bold;
      transition: 0.3s;
    }
    button:hover { background: linear-gradient(135deg, #388E3C, #66BB6A); }

    .question-item {
      background: #f9fff9;
      padding: 15px;
      margin-bottom: 12px;
      border-radius: 10px;
      border-left: 6px solid #4CAF50;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .question-actions button {
      background-color: #e53935;
    }
    .question-actions button:hover { background-color: #c62828; }

    
    .response-item {
      border-radius: 10px;
      background: white;
      margin-bottom: 15px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .response-item:hover { transform: scale(1.01); }
    .response-header {
      background: linear-gradient(135deg, #43A047, #66BB6A);
      color: white;
      padding: 12px 16px;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      flex-wrap: wrap;
    }
    .response-header .info {
      display: flex;
      flex-direction: column;
      line-height: 1.4;
    }
    .response-header strong { font-size: 17px; }
    .response-header small {
      font-size: 13px;
      opacity: 0.9;
    }
    .response-body {
      background: #fcfcfc;
      padding: 16px 20px;
      border-top: 1px solid #ddd;
      display: none;
      animation: fadeIn 0.3s ease;
    }
    .response-body pre {
      margin: 0;
      font-family: 'Courier New', monospace;
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: 15px;
      color: #2e2e2e;
      line-height: 1.6;
    }
    .score-line {
      margin-top: 10px;
      padding: 8px 12px;
      background: #e8f5e9;
      border-left: 4px solid #43A047;
      border-radius: 5px;
      font-weight: 600;
      color: #2e7d32;
    }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
    .arrow { font-weight: bold; font-size: 16px; }

    .delete-btn {
      background: #e53935;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
      margin-left: 10px;
    }
    .delete-btn:hover { background: #c62828; }

    footer {
      text-align: center;
      margin-top: 40px;
      color: white;
      font-size: 14px;
      opacity: 0.9;
    }

    
    @keyframes fadeSlideIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    
    html {
      scroll-behavior: smooth;
    }

    
    #backToTop {
      display: none;
      position: fixed;
      bottom: 25px;
      right: 25px;
      background: linear-gradient(135deg, #43A047, #66BB6A);
      color: white;
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      font-size: 22px;
      cursor: pointer;
      box-shadow: 0 4px 14px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      z-index: 999;
    }
    #backToTop:hover {
      background: linear-gradient(135deg, #2E7D32, #66BB6A);
      transform: scale(1.1);
    }
    /* üåü Splash Screen */
#splashScreen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at center, #001f12 0%, #001a0f 100%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  color: #00ffc3;
  font-family: "Poppins", sans-serif;
  letter-spacing: 2px;
  text-align: center;
  transition: opacity 1s ease;
}
#splashScreen img {
  width: 140px;
  height: 140px;
  margin-bottom: 20px;
  filter: drop-shadow(0 0 10px #00ffc3);
  animation: glowPulse 1.8s ease-in-out infinite;
  border-radius: 50%; /* Makes it circular */
}

#splashScreen h1 {
  font-size: 34px;
  margin: 0;
}
#splashScreen p {
  font-size: 15px;
  opacity: 0.8;
  margin-top: 6px;
}
@keyframes glowPulse {
  0% { filter: drop-shadow(0 0 4px #00ffc3); }
  50% { filter: drop-shadow(0 0 15px #00ffc3); }
  100% { filter: drop-shadow(0 0 4px #00ffc3); }
}
#header img {
  width: 60px;
  height: 60px;
  object-fit: contain;
  border-radius: 50%;
  border: 2px solid #00ffc3;  /* Green border around the circular logo */
  filter: drop-shadow(0 0 6px rgba(0,255,200,0.6));
}

    
  </style>
</head>
<body>
  <!-- üîπ Splash Screen -->
<div id="splashScreen">
  <img src="proctorx-logo.jpeg" alt="Proctor-X Logo">
  <h1>PROCTOR-X</h1>
  <p>AI-Driven Exam Integrity System</p>
</div>


<header>
  <div style="display:flex;align-items:center;justify-content:center;gap:15px;">
    <img src="proc2.png" alt="Proctor-X Logo" style="width:60px;height:60px;object-fit:contain;border-radius:50%;border:2px solid #00ffc3;">
    <h1 style="margin:0;font-size:28px;color:#000000;letter-spacing:1px;">PROCTOR-X</h1>
  </div>
  <p style="color:rgb(255, 255, 255);font-size:15px;margin-top:6px;">‚Äé ‚Äé ‚Äé ‚Äé ‚Äé ‚Äé ‚Äé ‚Äé ‚Äé ‚Äé ‚Äé AI-Driven Exam Integrity Dashboard</p>
</header>



<div class="container">

  <div class="tabs">
  <div class="tab active" onclick="switchTab('questionsTab', this)">üìò Manage Questions</div>
  <div class="tab" onclick="switchTab('responsesTab', this)">üìã Student Responses</div>
  <div class="tab" onclick="switchTab('aboutTab', this)">‚ÑπÔ∏è About Us</div>
</div>
<!-- ABOUT US TAB -->
<div id="aboutTab" class="tab-content">
  <h2>About Our Exam Portal</h2>
  <p>
    This platform was created to make online assessments transparent, secure, and user-friendly.
    It uses intelligent camera monitoring, question management, and real-time feedback to ensure a smooth examination process for students and administrators alike.
  </p>

  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin-top:30px;">
    <div style="background:rgba(255,255,255,0.8);padding:20px;border-radius:15px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.15);">
      <img src="ab3.png" style="width:90px;height:90px;border-radius:50%;border:2px solid #4CAF50;margin-bottom:10px;object-fit:cover;">
      <h4>Aaryan Bhat</h4>
      <p style="margin:0;">Developer</p>
    </div>
    <div style="background:rgba(255,255,255,0.8);padding:20px;border-radius:15px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.15);">
      <img src="tanmay2.png" style="width:90px;height:90px;border-radius:50%;border:2px solid #4CAF50;margin-bottom:10px;object-fit:cover;">
      <h4>Tanmay Jain</h4>
      <p style="margin:0;">Developer</p>
    </div>
    
    
  </div>

  <div style="margin-top:40px;background:rgba(255,255,255,0.95);padding:40px 45px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,0.2);">
  <h3 style="color:#2E7D32;font-size:24px;margin-bottom:18px;">Our Vision</h3>
  <p style="font-size:17px;line-height:1.9;color:#333;text-align:justify;">
    We envision a future where examinations are stress-free, transparent, and driven by trust ‚Äî a world where technology quietly ensures fairness while allowing learners to focus only on what truly matters: their knowledge. Our goal is to build a seamless, <strong>tech-enabled examination ecosystem</strong> that blends human empathy with digital precision.
  </p>

  <p style="font-size:17px;line-height:1.9;color:#333;text-align:justify;">
    We believe that assessments should be empowering ‚Äî not intimidating ‚Äî and that integrity should come from design, not surveillance. Through <strong>AI-based camera monitoring and smart behavior detection</strong>, exams can now be conducted securely without the constant presence of a human proctor. This <strong>proctor-free approach</strong> ensures privacy, comfort, and confidence, while still upholding the highest standards of honesty and accountability.
  </p>

  <p style="font-size:17px;line-height:1.9;color:#333;text-align:justify;">
    Our system automates everything ‚Äî from question creation, paper confirmation, and evaluation to result analysis ‚Äî ensuring zero manual errors and complete transparency. Educators get <strong>data-driven insights</strong> that help them understand learning gaps, while students experience <strong>personalized feedback</strong> and real-time performance tracking.
  </p>

  <h4 style="margin-top:25px;color:#2E7D32;">We envision an examination experience that is:</h4>
  <ul style="font-size:16px;line-height:1.8;color:#333;margin-top:10px;padding-left:25px;">
    <li><strong>Fair and Accessible:</strong> Every student, regardless of location or background, gets an equal opportunity to perform.</li>
    <li><strong>Human-Centered:</strong> Designed to support focus, reduce anxiety, and promote genuine learning outcomes.</li>
    <li><strong>Effortless for Educators:</strong> Simplified workflows, automated reports, and smart evaluation tools mean less admin, more teaching.</li>
    <li><strong>Sustainable and Scalable:</strong> 100% digital, paperless, and adaptable to institutions of any size.</li>
  </ul>

  <p style="font-size:17px;line-height:1.9;color:#333;text-align:justify;margin-top:15px;">
    Together, we‚Äôre redefining what exams can be ‚Äî turning them from moments of pressure into opportunities for growth, learning, and integrity.  
    A world where <strong>technology protects honesty</strong>, and every assessment celebrates effort, not oversight.
  </p>
</div>

</div>


  
  <div id="questionsTab" class="tab-content active">
    <h2>Add a New Question</h2>
    <form id="questionForm" enctype="multipart/form-data">
      <textarea name="question" placeholder="Enter the question..." required></textarea>
      
      <label>Question Type:</label>
      <select id="questionType" name="question_type" required onchange="toggleQuestionType()">
        <option value="">--Select Type--</option>
        <option value="mcq">MCQ</option>
        <option value="subjective">Subjective</option>
      </select>
      <div id="optionsBlock">
        <input name="option_a" placeholder="Option A">
        <input name="option_b" placeholder="Option B">
        <input name="option_c" placeholder="Option C">
        <input name="option_d" placeholder="Option D">
        <select name="correct_answer">
          <option value="">--Correct Answer--</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
          <option value="D">D</option>
        </select>
      </div>
      <button type="submit">‚ûï Add Question</button>
    </form>

    <hr>
    <button onclick="confirmQuestions()" style="background-color:#2196F3;">‚úÖ Confirm Questions</button>
    <button onclick="window.open('exam.html','_blank')" style="background-color:#FF9800;">üëÅÔ∏è Preview Exam</button>
<!-- Add this new button below the existing buttons inside Manage Questions tab -->
<button onclick="deleteAllQuestions()">‚ùåDelete All Questions</button>

    <h2>Existing Questions</h2>
    <div id="questionsPanel">Loading...</div>
  </div>

  
  <div id="responsesTab" class="tab-content">
    <h2>Student Responses</h2>
    <button onclick="loadResponses()" style="background:#2196F3;margin-bottom:10px;">üîÑ Refresh Responses</button>
    <button onclick="clearResponses()" style="background:#e53935;margin-bottom:10px;">üóëÔ∏è Delete All Responses</button>
    <div id="responsesPanel">Loading responses...</div>
  </div>
</div>


<button id="backToTop" title="Go to top">‚¨Ü</button>

<footer>&copy; 2025 Exam Portal</footer>

<script>
  function switchTab(tabId, el){
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    el.classList.add('active');
    document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
  }

  function toggleQuestionType(){
    const type=document.getElementById("questionType").value;
    document.getElementById("optionsBlock").style.display=type==="mcq"?"block":"none";
  }

  function loadQuestions(){
    fetch("get_questions.php")
      .then(r=>r.json()).then(data=>{
        const panel=document.getElementById("questionsPanel");
        panel.innerHTML="";
        if(!data.length){panel.textContent="No questions yet.";return;}
        data.forEach((q,i)=>{
          const div=document.createElement("div");
          div.className="question-item";
          if(q.type==="mcq"){
            div.innerHTML=`
              <strong>Q${i+1}: ${q.question}</strong><br>
              A. ${q.options[0]}<br>
              B. ${q.options[1]}<br>
              C. ${q.options[2]}<br>
              D. ${q.options[3]}<br>
              <strong>Correct:</strong> ${q.correct}<br>
              <div class="question-actions"><button onclick="deleteQuestion(${i})">üóë Delete</button></div>`;
          }else{
            div.innerHTML=`
              <strong>Q${i+1}: ${q.question}</strong><br>
              <em>(Subjective Question)</em><br>
              <div class="question-actions"><button onclick="deleteQuestion(${i})">üóë Delete</button></div>`;
          }
          panel.appendChild(div);
        });
      });
  }

  document.getElementById("questionForm").addEventListener("submit",e=>{
    e.preventDefault();
    const fd=new FormData(e.target);
    fd.set("question_type",document.getElementById("questionType").value);
    fetch("savequestions.php",{method:"POST",body:fd})
      .then(r=>r.text()).then(m=>{alert(m);e.target.reset();toggleQuestionType();loadQuestions();});
  });

  function deleteQuestion(i){
    fetch("delete_question.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`index=${i}`})
      .then(()=>loadQuestions());
  }

  function confirmQuestions(){
    fetch("confirm_questions.php").then(r=>r.text()).then(m=>{alert(m);if(m.includes("successfully"))loadQuestions();});
  }

  function loadResponses(){
    fetch("get_answers.php")
      .then(r=>r.text()).then(data=>{
        const panel=document.getElementById("responsesPanel");
        panel.innerHTML="";
        if(!data.trim()){panel.textContent="No student responses yet.";return;}
        const submissions=data.split("---- Submission by ").filter(x=>x.trim());
        submissions.forEach((s,index)=>{
          const trimmed=s.trim();
          const lines=trimmed.split("\n").filter(l=>l.trim()!=="");
          if(lines.length<=1)return;
          const match=trimmed.match(/^(.*?) at ([\d\-: ]+)/);
          const name=match?match[1].trim():"Unknown";
          const date=match?match[2].trim():"";
          const answerText=lines.slice(1).join("\n");
          const div=document.createElement("div");
          div.className="response-item";
          div.innerHTML=`
            <div class="response-header" onclick="toggleResponse(this)">
              <div class="info">
                <strong>üë§ ${name}</strong>
                
              </div>
              <div>
                <button class="delete-btn" onclick="event.stopPropagation(); deleteResponse(${index})">‚ùå Delete</button>
                <span class="arrow">‚ñº</span>
              </div>
            </div>
            <div class="response-body"><pre>${styleResponse(answerText)}</pre></div>`;
          panel.appendChild(div);
        });
      });
  }

  function styleResponse(text){
    return text
      .replace(/(Q\d+:)/g,"<strong>$1</strong>")
      .replace(/(Your Answer:)/g,"<strong style='color:#1565c0;'>$1</strong>")
      .replace(/(Correct Answer:)/g,"<strong style='color:#2e7d32;'>$1</strong>")
      .replace(/(Status:)/g,"<strong style='color:#f57c00;'>$1</strong>")
      .replace(/(Objective Score:[^\n]*)/g,"<div class='score-line'>$1</div>")
      .replace(/(Subjective Questions:[^\n]*)/g,"<div class='score-line'>$1</div>");
  }

  function toggleResponse(header){
    const body=header.nextElementSibling;
    const arrow=header.querySelector(".arrow");
    body.style.display=body.style.display==="block"?"none":"block";
    arrow.textContent=body.style.display==="block"?"‚ñ≤":"‚ñº";
  }

  function deleteResponse(index){
    if(!confirm("‚ö†Ô∏è Delete this student's submission?")) return;
    fetch("delete_response.php",{
      method:"POST",
      headers:{"Content-Type":"application/x-www-form-urlencoded"},
      body:`index=${index}`
    })
    .then(r=>r.text())
    .then(msg=>{
      alert(msg);
      loadResponses();
    });
  }

  function clearResponses(){
    if(!confirm("‚ö†Ô∏è Delete all student responses?")) return;
    fetch("clear_answers.php")
      .then(r=>r.text())
      .then(msg=>{
        alert(msg);
        loadResponses();
      });
  }

  
  window.addEventListener("scroll", () => {
    const btn = document.getElementById("backToTop");
    btn.style.display = window.scrollY > 200 ? "block" : "none";
  });

  document.getElementById("backToTop").addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  loadQuestions();
  loadResponses();
  
</script>
<script>
window.addEventListener("load", () => {
  const splash = document.getElementById("splashScreen");
  setTimeout(() => {
    splash.style.opacity = "0";
    setTimeout(() => splash.remove(), 1000);
  }, 4000); // splash visible for 2.5s
});
</script>
<script>
  // This function calls the PHP script to delete all questions
  function deleteAllQuestions() {
    if (confirm("Are you sure you want to delete all questions? This action cannot be undone.")) {
      fetch("delete_all_questions.php")
        .then(response => response.text())
        .then(data => {
          alert(data);  // Show success or error message from the PHP script
          loadQuestions();  // Reload the questions table (clear or reload)
        })
        .catch(error => alert("Error deleting questions: " + error));
    }
  }
</script>


</body>
</html>
